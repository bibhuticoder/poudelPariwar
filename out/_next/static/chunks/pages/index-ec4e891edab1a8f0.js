(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1241)}])},1241:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var s=n(5893),r=n(7294),a=n(9008),l=n.n(a),o={src:"/_next/static/media/old-paper.23663e1e.jpg",height:2214,width:3250,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABgEBAQAAAAAAAAAAAAAAAAAABAX/2gAMAwEAAhADEAAAALgSmf/EABoQAAEFAQAAAAAAAAAAAAAAAAMAARESIzL/2gAIAQEAAT8AIbGatyv/xAAWEQADAAAAAAAAAAAAAAAAAAAAAQL/2gAIAQIBAT8Apn//xAAWEQADAAAAAAAAAAAAAAAAAAAAAQL/2gAIAQMBAT8AlH//2Q==",blurWidth:8,blurHeight:5},i=n(3750),c=n(9583),d=n(5675),u=n.n(d),A={src:"/_next/static/media/old-paper-piece.d293323e.png",height:500,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAyklEQVR42iWMwU1EMQxEx46/s39X/BVVwIUT9dEFBXCgDSrhwGkLALEkP7FjgpDmaTSa0dDL89PrIS93OS+cVXciOpdSvNt4Nw8WCn8UlvvTuuCQFcQMScD1Wh/c9yLrmm+Pq2K7Obmqzp4pqwwg0gyXv9tvkQRJiUVXTpJJRDgxYXplAJ9MDB8jAJr6hybWm/LeOnkAEQi3OqyVsG7DHOjmTfbWvFSFLC3NMQhA65ZKbTCnImbx8VPqBqIvXVQixuY+yqB8OW7nt1+mXGS1Ru4v6wAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},m=function(e){var t=e.backButton,n=e.onClose,r=void 0===n?null:n,a=e.children;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed bg-gray-700 bg-opacity-75 overflow-hidden h-screen w-screen left-0 top-0 z-40",onClick:r}),(0,s.jsxs)("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 overflow-hidden transition-all w-full px-4 max-w-lg z-50",children:[void 0===a?null:a,void 0!==t&&t?(0,s.jsxs)("button",{className:"m-4 mx-auto text-center flex items-center text-blue-500 bg-blue-50 px-4 py-2 rounded",onClick:r,children:[(0,s.jsx)(i.e6h,{className:"mr-2"}),(0,s.jsx)("span",{children:" पछाडि जानुहोस् "})]}):null]})]})},x=n(5935),h=n(1818),f=n(381),g=n.n(f),p=function(e){if(!e)return null;var t={0:"०",1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९"};return e.split("").map(function(e){return t[e]||e}).join("")},b=function(e,t){if(!e)return null;var n=t?g()(t,"YYYY-MM-DD"):g()(),s=g()(e,"YYYY-MM-DD");return n.diff(s,"years",!1)},v=function(e){var t=e.person,n=e.onClose,a=(0,r.useState)(!1),l=a[0],o=a[1],i=(0,r.useState)(!1),c=i[0],d=i[1];return(0,r.useEffect)(function(){t&&t.dob&&t.bio&&t.bio.length&&d(!0)},[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m,{backButton:!0,onClose:n,children:(0,s.jsxs)("div",{className:"px-4 pt-4 pb-4 text-center text-black font-Mukta bg-stone-500",style:{backgroundImage:"url(".concat(A.src,")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:[(0,s.jsx)("div",{className:"m-8"}),(0,s.jsx)(u(),{src:"/images/".concat(t.id,".jpg")||0,width:l?120:0,height:l?120:0,alt:"फेला परेन",className:"rounded-full object-cover",onLoadingComplete:function(){return o(!0)},onError:function(){}}),(0,s.jsx)("h1",{className:"text-3xl md:text-4xl mt-4 font-semibold",children:t.name}),t.age&&(0,s.jsx)("p",{className:"mt-2",children:(0,s.jsxs)(s.Fragment,{children:[t.dob?(0,s.jsx)("span",{className:"bg-gray-200 px-2 rounded-md mr-2",children:p(t.dob)}):null,t.dod?(0,s.jsx)("span",{className:"bg-gray-200 px-2 rounded-md mr-2",children:p(t.dod)}):null,t.age?(0,s.jsxs)("span",{className:"bg-gray-200 px-2 rounded-md",children:[p(t.age.toString()),"\xa0वर्ष"]}):null]})}),(0,s.jsx)("p",{className:"text-lg md:text-xl mt-8 max-h-64 md:max-h-80 overflow-y-auto text-left px-2 md:px-4 mb-4",children:t.bio&&(0,x.ZP)(t.bio)}),c?null:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("p",{className:"my-4 text-lg md:text-xl",children:["कृपया \xa0",(0,s.jsx)("a",{href:"https://forms.gle/wekzeMbY77AZdQR56",target:"_blank",rel:"noreferrer",className:"site-link",children:"फारम भर्नुहोस्"}),"\xa0 र आफ्नो जानकारी पूरा गर्नुहोस् ।"]})}),(0,s.jsxs)("div",{className:"flex justify-center",children:[(0,s.jsx)(h.Dk,{url:location.href,hashtag:"#bibhuti.me",children:(0,s.jsx)(h.Vq,{size:32,round:!0})}),(0,s.jsx)("div",{className:"m-2"}),(0,s.jsx)(h.B,{url:location.href,children:(0,s.jsx)(h.Zm,{size:32,round:!0})})]})]})})})},j=n(9306),w=n.n(j),y=n(3162),N=function(e){var t=e.familyTreeRef,n=void 0===t?null:t,a=e.onClose,l=(0,r.useState)(!1),o=l[0],c=l[1],d=function(){c(!0),w().toBlob(n,{width:n.scrollWidth,height:n.scrollHeight}).then(function(e){(0,y.saveAs)(e,"poudyal-pariwar-tree.png"),c(!1)}).catch(function(e){console.error("oops, something went wrong!",e),c(!1)})},u=o?(0,s.jsxs)("p",{children:["डाउनलोड गर्न तयारी गर्दै...",(0,s.jsx)("br",{}),"यो पूरा हुन केही मिनेट लाग्नेछ"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-2xl text-center mb-4",children:"सम्पुर्ण बंसावली डाउनलोड गर्न तलको बटनमा क्लिक गर्नुहोस्"}),(0,s.jsxs)("button",{className:"px-4 py-2 rounded-md bg-gray-400 text-white flex items-center mx-auto",onClick:d,children:[(0,s.jsx)(i.eEq,{})," ",(0,s.jsx)("span",{className:"ml-2",children:"डाउनलोड"})]})]});return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m,{backButton:!0,onClose:void 0===a?null:a,children:(0,s.jsx)("div",{className:"text-center text-black font-Mukta bg-white rounded-md p-4",children:u})})})},k=n(1799),E=n(7856),C={data:function(e){if(void 0!=e.hasAccurateAge&&!1==e.hasAccurateAge){var t,n;e.dob&&(e.dob=null===(t=e.dob)||void 0===t?void 0:t.split("-").shift()),e.dod&&(e.dod=null===(n=e.dod)||void 0===n?void 0:n.split("-").shift()),e.dob&&e.dod?e.age=parseInt(e.dod)-parseInt(e.dob):e.dob&&!e.dod&&(e.age=new Date().getFullYear()-parseInt(e.dob))}else e.dob&&(e.age=b(e.dob,e.dod));return e.bio?e.bio=E.sanitize(e.bio):e.bio="",e},treant:function(e){var t='<div class="person-group '.concat(e.spouse&&e.spouse.length?"--married":"--unmarried",'">'),n=function(e){var t='<div class="person" id="'.concat(e.id,'">');return t+='<p class="name">'.concat(e.name,"</p>"),t+="</div>"};if(e.self&&(t+=n(e.self)),e.spouse&&e.spouse.length)for(var s=0;s<e.spouse.length;s++)e.spouse[s]&&(t+=n(e.spouse[s]));return t+"</div>"}},S=function(e){if(e.self&&(e.self=(0,k.Z)({},C.data(e.self))),e.spouse&&e.spouse.length)for(var t=0;t<e.spouse.length;t++)e.spouse[t]&&(e.spouse[t]=(0,k.Z)({},C.data(e.spouse[t])));e.innerHTML=C.treant(e),delete e.self,delete e.spouse},I=function(e){var t=JSON.parse(JSON.stringify(e)),n=[],s=t;for(n.push(t);n.length;)S(s=n.shift()),s.children&&s.children.length&&(n=n.concat(s.children));return t},Q=function(e,t){var n=[],s=t,r=[];for(n.push(t);n.length;)if(s=n.shift()){if(s.self&&s.self.id.includes(e)&&r.push(s.self),s.spouse&&s.spouse.length)for(var a=0;a<s.spouse.length;a++)s.spouse[a].id.includes(e)&&r.push(s.spouse[a]);s.children&&s.children.length&&(n=n.concat(s.children))}return r},D=function(e,t){var n=[],s=t;for(n.push(t);n.length;)if(s=n.shift()){var r=null;if(s.self&&s.self.id==e&&(r=s.self),s.spouse&&s.spouse.length)for(var a=0;a<s.spouse.length;a++)s.spouse[a].id==e&&(r=s.spouse[a]);if(r)return C.data(r);s.children&&s.children.length&&(n=n.concat(s.children))}return null},B=function(e){var t=e.treeData,n=void 0===t?null:t,a=(0,r.useState)(""),l=a[0],o=a[1],c=(0,r.useState)([]),d=c[0],u=c[1],A=function(e){o(e.target.value.toLowerCase()),u(Q(l,n))},m=function(e){o(""),u([]),window.document.dispatchEvent(new CustomEvent("show-person-detail",{detail:e}))};return(0,s.jsxs)("div",{className:"relative flex-grow md:max-w-xs",children:[(0,s.jsxs)("div",{className:"flex items-center border-2 border-gray-200 rounded px-2 py-1 bg-gray-100",children:[(0,s.jsx)("span",{className:"text-black",children:(0,s.jsx)(i.dVI,{})}),(0,s.jsx)("input",{type:"text",value:l,className:"pl-2 outline-none w-full text-black bg-gray-100",onChange:A})]}),d.length>0&&(0,s.jsx)("div",{className:"absolute bg-gray-50 rounded z-10 w-full shadow-md",children:(0,s.jsx)("div",{className:"flex flex-col",children:d.map(function(e){return(0,s.jsx)("div",{onClick:function(){return m(e.id)},className:"cursor-pointer py-2 mx-2 my-1 text-black hover:text-gray-900",children:e.name},e.id)})})})]})},M=n(196),L=function(e){var t=e.activePersonId,n=e.onActivePersonRemove,a=r.createRef(),l=null,d=(0,r.useState)(!1),u=d[0],A=d[1],m=(0,r.useState)(null),x=m[0],h=m[1],f=(0,r.useState)(null),g=f[0],b=f[1],j=function(e){Treant&&g&&!l&&(l=new Treant({chart:{container:"#family-tree",levelSeparation:50,nodeAlign:"BOTTOM",rootOrientation:"NORTH",connectors:{type:"step",style:{"arrow-end":"open-wide-medium",stroke:"#998B70","stroke-dasharray":"-","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"}},node:{HTMLclass:"node"}},nodeStructure:I(g)},function(){if(e&&e(),a.current){var t=a.current;t.scrollLeft=t.scrollWidth/2-t.getBoundingClientRect().width/2}window.document.querySelectorAll(".person").forEach(function(e){e.addEventListener("click",function(t){var n=e.getAttribute("id");window.document.dispatchEvent(new CustomEvent("show-person-detail",{detail:n}))})})}))},w=function(){h(null),n()};return(0,r.useEffect)(function(){M.ZP.get("family-tree-data.json").then(function(e){b(e.data)}).catch(function(e){return console.log(e)})},[]),(0,r.useEffect)(function(){j(function(){if(t){var e=D(t,g);e&&h(e)}})},[g]),(0,r.useEffect)(function(){var e=D(t,g);if(e){h(e);var n=document.getElementById(t+"");n&&(n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),Array.from(document.querySelectorAll(".person")).forEach(function(e){e.children[0].classList.remove("!text-red-800")}),n.children[0].classList.add("!text-red-800"))}},[t]),(0,s.jsxs)("section",{id:"chronicles",className:"rounded-md bg-center bg-no-repeat bg-cover",style:{backgroundImage:"url(".concat(o.src,")")},children:[(0,s.jsx)("div",{className:"container relative hidden md:block",children:(0,s.jsx)("div",{className:"absolute transform -translate-y-full top-0 right-0 w-full bg-contain bg-no-repeat bg-right-top -z-10",style:{backgroundImage:"url(/images/tree-with-hands.png)",height:"35rem"}})}),(0,s.jsxs)("div",{className:"mx-auto px-4",children:[(0,s.jsxs)("div",{className:"toolbar flex flex-wrap items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-black bg-gray-100 text-center md:text-left rounded p-2 flex-grow mx-1 md:flex-grow-0 md:mb-0 mt-2",children:["बंशावाली: वि.सं \xa0",p("1800"),"\xa0 देखी आजसम्म"]}),(0,s.jsxs)("div",{className:"flex justify-end items-center mt-2 flex-grow",children:[(0,s.jsx)(B,{treeData:g}),(0,s.jsx)("a",{href:"https://forms.gle/wekzeMbY77AZdQR56",target:"_blank",rel:"noreferrer",className:"bg-gray-100 border-2 rounded-md px-3 py-2 mx-2",children:(0,s.jsx)(i.im1,{})}),(0,s.jsx)("button",{onClick:function(){return A(!0)},className:"bg-gray-100 border-2 rounded-md px-3 py-2",title:"Download",children:(0,s.jsx)(i.eEq,{})})]})]}),(0,s.jsx)("div",{className:"relative overflow-x-auto",children:(0,s.jsx)("div",{id:"family-tree",ref:a,className:"rounded-md",children:(0,s.jsx)(c.koH,{className:"text-5xl my-16 mx-auto text-gray-500 animate-spin"})})})]}),x&&(0,s.jsx)(v,{person:x,onClose:w}),u&&(0,s.jsx)(N,{familyTreeRef:a.current,onClose:function(){return A(!1)}})]})},T=n(1163),R=function(){var e=(0,T.useRouter)(),t=(0,r.useState)(null),n=t[0],a=t[1];(0,r.useEffect)(function(){window.document.addEventListener("show-person-detail",function(t){e.push("?name="+t.detail)})},[]),(0,r.useEffect)(function(){e.query.name&&n!=e.query.name&&a(e.query.name+"")},[e.query]);var o=function(){n&&a(null)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{children:(0,s.jsx)("title",{children:"पौडेल परिवार"})}),(0,s.jsx)("section",{id:"hero",className:"container py-16 md:pt-36 md:pb-32",children:(0,s.jsxs)("main",{className:"text-center md:text-left font-Mukta text-black",children:[(0,s.jsx)("h1",{className:"text-6xl md:text-6xl font-semibold mb-12 md:mb-16",children:"स्वागतम्"}),(0,s.jsxs)("p",{className:"text-2xl md:text-3xl md:w-1/2 md:max-w-xl leading-10",children:["यस पृष्ठमा पौडेल परिवार तथा उनीहरुको वंशज को जानकारी समावेश गरिएको छ ।",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"नयाँ पुस्ताहरूलाई पारिवारिक इतिहास र परिवारका सदस्यहरूको बारेमा थप जान्नको लागि यसले यसले मद्दत गर्नेछ ।"]})]})}),(0,s.jsx)("div",{className:"px-0 md:px-8 mx-auto my-4 mb-16",children:(0,s.jsx)(L,{activePersonId:n,onActivePersonRemove:o})})]})}}},function(e){e.O(0,[445,885,243,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);